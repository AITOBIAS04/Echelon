{
  "schema_version": "2.0.1",
  "template_family": "PRODUCT",
  "execution_path": "replay",
  "theatre_id": "product_replay_engine_v1",
  "template_id": "ledger_reconciliation_v1",
  "display_name": "LEDGER_RECONCILIATION_V1 — Bank Rail ↔ Event Log Integrity",
  "description": "v0.1 deterministic replay theatre. Uses £1,500 split example and synthetic bank statement slices to validate reconciliation and event logging.",
  "criteria": {
    "criteria_ids": [
      "bank_ref_match",
      "bucket_sum_matches_gross",
      "bucket_destination_valid",
      "event_log_complete",
      "exceptions_correct"
    ],
    "criteria_human": "Deterministic verification that bank statement transactions reconcile to payment splits and ledger events, with correct exception handling.",
    "weights": {
      "bank_ref_match": 0.25,
      "bucket_sum_matches_gross": 0.15,
      "bucket_destination_valid": 0.15,
      "event_log_complete": 0.3,
      "exceptions_correct": 0.15
    }
  },
  "version_pins": {
    "constructs": {
      "two_rail_marketplace_core": "v0.1-fixtures"
    },
    "scorer_version": "deterministic-v0.1"
  },
  "dataset_hashes": {
    "reconciliation_fixtures_10.json": "18365f37fd62dfd313431acb8ffa1abf699266eec39b9fc22e4e28f99586c62e"
  },
  "product_theatre_config": {
    "construct_under_test": {
      "construct_id": "two_rail_marketplace_core",
      "construct_version": "v0.1-fixtures"
    },
    "adapter_type": "local",
    "adapter_endpoint": "python:two_rail_oracles.deterministic",
    "replay_data_path": "/mnt/data/two_rail_theatres_v0_1/reconciliation_fixtures_10.json",
    "ground_truth_source": "v0.1 fixtures (deterministic ledger/policy replay)",
    "mock_only": false
  },
  "fork_definitions": [],
  "resolution_programme": [
    {
      "step": "ingest",
      "action": "load_dataset",
      "input": "replay_data_path"
    },
    {
      "step": "invoke_oracle",
      "action": "deterministic_compute",
      "oracle": "reconciliation"
    },
    {
      "step": "score",
      "action": "binary_checks",
      "criteria_ids": [
        "bank_ref_match",
        "bucket_sum_matches_gross",
        "bucket_destination_valid",
        "event_log_complete",
        "exceptions_correct"
      ]
    },
    {
      "step": "certify",
      "action": "issue_certificate"
    }
  ],
  "evidence_bundle": {
    "manifest_required": true,
    "hash_algorithm": "sha256",
    "canonical_json": "RFC8785",
    "required_paths": [
      "inputs/",
      "policy/",
      "expected/",
      "manifest.json"
    ]
  }
}